---
title: 'Quantifiers: Part 4'
date: 2025-10-20
permalink: /posts/2025/10/blog-post-8/
tags:
  - lean
  - logic
  - quantifiers
  - forall
  - exists
  - negation
  - mixed quantifiers
---

Let's look at our four basic patterns:

- ∃x ∃y P(x, y)  -- "There exists an x and a y such that..."
  Think: "I can find two numbers that work together"
  
- ∀x ∀y P(x, y)  -- "For all x and all y..."
  Think: "This works for every possible pair of numbers"
  
- ∃x ∀y P(x, y)  -- "There exists an x such that for all y..."
  Think: "I can find one special x that works with every y"
  
- ∀x ∃y P(x, y)  -- "For all x there exists a y..."
  Think: "For each x, I can find a y that works with it"


When working with multiple quantifiers in Lean, you can't have two quantifiers binding the same variable name. Let's see what this means in practice:

```lean
-- This won't work! Just like you can't move the same piece to two places at once
example : ∀ x, ∀ x, P x → Q x →  P x → Q x := by
  sorry  -- Lean will complain about duplicate variables

-- This works! Each piece gets its own square
example : ∀ x, P x → Q x →  P x → Q x := by
  intro h g hg ph
  exact hg

-- And this works too! Different names for different roles
example : ∀ x, ∀ n, x = n → P x → Q x → P n → Q n := by
  intro h g hg ph qh pg
  rw[hg] at qh
  exact qh
```

```lean
example : ∀ x, ∃ n, P x → Q x →  ¬ (P n ∧ ¬ Q n) := by
  intro h
  use h
  push_neg
  intro ph
  intro qh
  intro ph'
  exact qh
```

## Converting statements to prenex form

```lean
-- Here's a theorem that might look intimidating at first
example : (h : ∀ x, P x → Q x) (n : ℕ) (hp : P n) : ∃ x, Q x := by
  have hq := h n hp  -- First, we use our hypothesis to deduce Q n
  exists n          -- Then we reveal our witness: it was n all along!
                    -- Like a magician showing the card was in plain sight

-- What's happening here? Let's break it down:
-- 1. We start with a universal rule: "if P x then Q x" (for any x)
-- 2. We're given a specific number n where P n is true
-- 3. We need to find some x where Q x is true
-- 4. The magic? We can use n itself as our witness!
```

One possible interpretation in prenex form is:
```lean
example : ∀ x, ∃ y, P x → Q x → Q y := by
  intro N
  use N
  intro pn qn
  exact qn 
```

Here is a closer version that includes the hypothesis `hp`:
```lean
example : ∀x, ∀n, ∃y, P x → Q x → P n → Q y := by
  intro A N
  use A
  intro pa qa pn
  exact qa
```

Here is the prenex form for the contrapositive:
```lean
example : ∀ x, ∃ y, (P x → Q x) → (¬Q y → ¬P x) := by
  intro N
  use N
  intro h
  contrapose
  push_neg
  exact h
```

But this can really be simplified to remove the redundant:
```lean
example : ∀ x, (P x → Q x) → (¬Q x → ¬P x) := by
  intro N
  intro h
  contrapose
  push_neg
  exact h
```

## The Universal-Existential Bridge

Here's a fascinating connection that lies at the heart of quantifier logic. Consider this statement:

```lean
example (P Q : ℕ → Prop) : (∀ x, P x → Q x) → (∃ x, P x → Q x) := by 
  intro N
  have n : ℕ := 0  -- Here's a clever trick: we can always use 0!
  have h := N n    -- Apply our universal rule to 0
  use n            -- Show that 0 is our witness

-- This proof reveals something profound:
-- If something is true for ALL numbers,
-- then surely we can find at least ONE number where it's true!
```

When we convert this to prenex form, we get an elegant reformulation:

```lean
example (P Q : ℕ → Prop) : ∀ x, ∃ y, ((P x → Q x) → (P y → Q y)) := by
  intro N
  use N            -- Notice how simple this becomes
  tauto            -- The logic takes care of itself!

-- This version tells the same story but from a different angle:
-- For any x, we can find a y that preserves our logical relationship
-- It's like a mathematical echo, repeating the same truth in a new voice
```